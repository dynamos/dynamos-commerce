/**
 * Created by adelmo.pereira on 23/03/2017.
 */
"use strict";var MessageCenterModule=angular.module("MessageCenterModule",[]);MessageCenterModule.provider("$messageCenterService",function(){var s=this;s.options={},s.setGlobalOptions=function(e){s.options=e},s.getOptions=function(e){return s.options},this.$get=function(){return{setGlobalOptions:s.setGlobalOptions,options:s.options,getOptions:s.getOptions}}}).service("messageCenterService",["$rootScope","$sce","$timeout","$messageCenterService",function(s,e,t,n){return{mcMessages:this.mcMessages||[],offlistener:this.offlistener||void 0,status:{unseen:"unseen",shown:"shown",next:"next",permanent:"permanent"},add:function(s,a,i){var o=["info","warning","danger","success"],r=this;i=i||{};var i=angular.extend({},n.getOptions(),i);if(o.indexOf(s)==-1)throw"Invalid message type";var c={type:s,status:i.status||this.status.unseen,processed:!1,close:function(){return r.remove(this)}};return c.message=i.html?e.trustAsHtml(a):a,c.html=!!i.html,angular.isDefined(i.timeout)&&(c.timer=t(function(){c.close()},i.timeout)),this.mcMessages.push(c),c},remove:function(s){var e=this.mcMessages.indexOf(s);this.mcMessages.splice(e,1)},reset:function(){this.mcMessages=[]},removeShown:function(){for(var s=this.mcMessages.length-1;s>=0;s--)this.mcMessages[s].status==this.status.shown&&this.remove(this.mcMessages[s])},markShown:function(){for(var s=this.mcMessages.length-1;s>=0;s--)this.mcMessages[s].processed||(this.mcMessages[s].status==this.status.unseen?(this.mcMessages[s].status=this.status.shown,this.mcMessages[s].processed=!0):this.mcMessages[s].status==this.status.next&&(this.mcMessages[s].status=this.status.unseen))},flush:function(){s.mcMessages=this.mcMessages}}}]),MessageCenterModule.directive("mcMessages",["$rootScope","messageCenterService",function(s,e){return{restrict:"EA",template:'    <div id="mc-messages-wrapper">      <div class="alert alert-{{ message.type }} {{ animation }}" ng-repeat="message in mcMessages">        <a class="close" ng-click="message.close();" data-dismiss="alert" aria-hidden="true">&times;</a>        <span ng-switch on="message.html">          <span ng-switch-when="true">            <span ng-bind-html="message.message"></span>          </span>          <span ng-switch-default>            {{ message.message }}          </span>        </span>      </div>    </div>    ',link:function(t,n,a){e.flush();var i=function(t,n,a){e.markShown(),e.removeShown(),s.mcMessages=e.mcMessages,e.flush()};void 0===e.offlistener&&(e.offlistener=s.$on("$locationChangeSuccess",i)),t.animation=a.animation||"fade in"}}}]);