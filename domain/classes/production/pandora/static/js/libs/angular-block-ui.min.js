!function(t){function e(e){try{t.module(e)}catch(t){return!1}return!0}function o(t,o,n){function r(){t.$on("$locationChangeStart",function(t){o.$_blockLocationChange&&o.state().blockCount>0&&t.preventDefault()}),t.$on("$locationChangeSuccess",function(){o.$_blockLocationChange=n.blockBrowserNavigation})}if(n.blockBrowserNavigation)if(e("ngRoute"))var c=t.$on("$viewContentLoaded",function(){c(),r()});else r()}var n=t.module("blockUI",[]);n.config(["$provide","$httpProvider",function(t,e){t.decorator("$exceptionHandler",["$delegate","$injector",function(t,e){var o,n;return function(r,c){if(n=n||e.get("blockUIConfig"),n.resetOnException)try{o=o||e.get("blockUI"),o.instances.reset()}catch(t){console.log("$exceptionHandler",r)}t(r,c)}}]),e.interceptors.push("blockUIHttpInterceptor")}]),n.run(["$document","blockUIConfig","$templateCache",function(t,e,o){e.autoInjectBodyBlock&&t.find("body").attr("block-ui","main"),e.template&&(e.templateUrl="$$block-ui-template$$",o.put(e.templateUrl,e.template))}]),n.config(["$provide",function(t){t.decorator("$location",r)}]);var r=["$delegate","blockUI","blockUIConfig",function(e,o,n){function r(t){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return t===e&&(o.$_blockLocationChange=!1),t}}if(n.blockBrowserNavigation){o.$_blockLocationChange=!0;var c=["url","path","search","hash","state"];t.forEach(c,r)}return e}];n.directive("blockUiContainer",["blockUIConfig","blockUiContainerLinkFn",function(t,e){return{scope:!0,restrict:"A",templateUrl:t.templateUrl,compile:function(t){return e}}}]).factory("blockUiContainerLinkFn",["blockUI","blockUIUtils",function(t,e){return function(t,e,o){var n=e.inheritedData("block-ui");if(!n)throw new Error("No parent block-ui service instance located.");t.state=n.state()}}]),n.directive("blockUi",["blockUiCompileFn",function(t){return{scope:!0,restrict:"A",compile:t}}]).factory("blockUiCompileFn",["blockUiPreLinkFn",function(t){return function(e,o){return e.append('<div block-ui-container class="block-ui-container"></div>'),{pre:t}}}]).factory("blockUiPreLinkFn",["blockUI","blockUIUtils","blockUIConfig",function(t,e,n){return function(r,c,i){c.hasClass("block-ui")||c.addClass(n.cssClass),i.$observe("blockUiMessageClass",function(t){r.$_blockUiMessageClass=t});var a=i.blockUi||"_"+r.$id,l=t.instances.get(a);if("main"===a)o(r,l,n);else{var s=c.inheritedData("block-ui");s&&(l._parent=s)}r.$on("$destroy",function(){l.release()}),l.addRef(),r.$_blockUiState=l.state(),r.$watch("$_blockUiState.blocking",function(t){c.attr("aria-busy",!!t),c.toggleClass("block-ui-visible",!!t)}),r.$watch("$_blockUiState.blockCount > 0",function(t){c.toggleClass("block-ui-active",!!t)});var u=i.blockUiPattern;if(u){var f=e.buildRegExp(u);l.pattern(f)}c.data("block-ui",l)}}]),n.constant("blockUIConfig",{templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:!0,resetOnException:!0,requestFilter:t.noop,autoInjectBodyBlock:!0,cssClass:"block-ui block-ui-anim-fade",blockBrowserNavigation:!1}),n.factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig","$templateCache",function(t,e,o,n){function r(){a=a||e.get("blockUI")}function c(t){o.autoBlock&&t&&!t.$_noBlock&&t.$_blocks&&(r(),t.$_blocks.stop())}function i(e){try{c(e.config)}catch(t){console.log("httpRequestError",t)}return t.reject(e)}var a;return{request:function(t){if(o.autoBlock&&("GET"!=t.method||!n.get(t.url))){var e=o.requestFilter(t);e===!1?t.$_noBlock=!0:(r(),t.$_blocks=a.instances.locate(t),t.$_blocks.start(e))}return t},requestError:i,response:function(t){return t&&c(t.config),t},responseError:i}}]),n.factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(e,o,n,r){function c(c){var l,u=this,f={id:c,blockCount:0,message:e.message,blocking:!1},k=[];this._id=c,this._refs=0,this.start=function(c){function s(){l=null,f.blocking=!0}c=c||{},t.isString(c)?c={message:c}:t.forEach(a,function(t){if(c[t])throw new Error("The property "+t+" is reserved for the block state.")}),t.extend(f,c),f.blockCount>0?f.message=c.message||f.message||e.message:f.message=c.message||e.message,f.blockCount++;var k=t.element(r[0].activeElement);k.length&&n.isElementInBlockScope(k,u)&&(u._restoreFocus=k[0],o(function(){u._restoreFocus&&u._restoreFocus!==i[0]&&u._restoreFocus.blur()})),l||0===e.delay?0===e.delay&&s():l=o(s,e.delay)},this._cancelStartTimeout=function(){l&&(o.cancel(l),l=null)},this.stop=function(){f.blockCount=Math.max(0,--f.blockCount),0===f.blockCount&&u.reset(!0)},this.isBlocking=function(){return f.blocking},this.message=function(t){f.message=t},this.pattern=function(t){return void 0!==t&&(u._pattern=t),u._pattern},this.reset=function(e){if(u._cancelStartTimeout(),f.blockCount=0,f.blocking=!1,u._restoreFocus&&(!r[0].activeElement||r[0].activeElement===i[0])){try{u._restoreFocus.focus()}catch(t){!function(){var t=u._restoreFocus;o(function(){if(t)try{t.focus()}catch(t){}},100)}()}u._restoreFocus=null}try{e&&t.forEach(k,function(t){t()})}finally{k.length=0}},this.done=function(t){k.push(t)},this.state=function(){return f},this.addRef=function(){u._refs+=1},this.release=function(){--u._refs<=0&&s.instances._destroy(u)}}var i=r.find("body"),a=["id","blockCount","blocking"],l=[];l.get=function(t){if(!isNaN(t))throw new Error("BlockUI id cannot be a number");var e=l[t];return e||(e=l[t]=new c(t),l.push(e)),e},l._destroy=function(e){if(t.isString(e)&&(e=l[e]),e){e.reset();var o=n.indexOf(l,e);l.splice(o,1),delete l[e.state().id]}},l.locate=function(t){var e=[];n.forEachFnHook(e,"start"),n.forEachFnHook(e,"stop");for(var o=l.length;o--;){var r=l[o],c=r._pattern;c&&c.test(t.url)&&e.push(r)}return 0===e.length&&e.push(s),e},n.forEachFnHook(l,"reset");var s=l.get("main");return s.addRef(),s.instances=l,s}]),n.factory("blockUIUtils",function(){var e=t.element,o={buildRegExp:function(t){var e=t.match(/^\/(.*)\/([gim]*)$/);if(!e)throw Error("Incorrect regular expression format: "+t);return new RegExp(e[1],e[2])},forEachFn:function(t,e,o){for(var n=t.length;n--;){var r=t[n];r[e].apply(r,o)}},forEachFnHook:function(t,e){t[e]=function(){o.forEachFn(this,e,arguments)}},isElementInBlockScope:function(t,e){for(var o=t.inheritedData("block-ui");o;){if(o===e)return!0;o=o._parent}return!1},findElement:function(t,n,r){var c=null;if(n(t))c=t;else{var i;i=r?t.parent():t.children();for(var a=i.length;!c&&a--;)c=o.findElement(e(i[a]),n,r)}return c},indexOf:function(t,e,o){for(var n=o||0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}};return o}),t.module("blockUI").run(["$templateCache",function(t){t.put("angular-block-ui/angular-block-ui.ng.html",'<div class="block-ui-overlay"></div><div class="block-ui-message-container" aria-live="assertive" aria-atomic="true"><div class="block-ui-message" ng-class="$_blockUiMessageClass">{{ state.message }}</div></div>')}])}(angular);